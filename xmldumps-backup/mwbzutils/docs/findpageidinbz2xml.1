.\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.40.4.
.TH FINDPAGEIDINBZ2XML "1" "July 2013" "findpageidinbz2xml 0.0.4" "User Commands"
.SH NAME
findpageidinbz2xml \- Display offset of bz2 block for given page id in bzip2 MediaWiki XML file
.SH SYNOPSIS
.B findpageidinbz2xml
\fI--filename file --pageid id \fR[\fI--stubfile\fR] [\fI--useapi\fR] [\fI--verbose\fR]
.SH DESCRIPTION
.IP
[\-\-help] [\-\-version]
.PP
Show the offset of the bz2 block in the specified MediaWiki XML dump file
containing the given page id.  This assumes that the bz2 header of the file
is intact and that page ids are steadily increasing throughout the file.
.SS "If the page id is found, a line in the following format will be written to stdout:"
.IP
position:xxxxx pageid:nnn
.PP
where 'xxxxx' is the offset of the block from the beginning of the file, and
\&'nnn' is the id of the first page encountered in that block.
.PP
Note:
This program may use the MediaWiki api to find page ids from revision ids
if 'useapi' is specified.
It may use a stub file to find page ids from rev ids if 'stubfile' is specified.
It will only do one of the above if it has been reading from the file for some
large number of iterations without findind a page tag (some pages have > 500K
revisions and a heck of a lot of text).
If both 'useapi' and 'stubfile' are specified, the api will be used as it is faster.
.PP
Exits with 0 in success, \fB\-1\fR on error.
.SH OPTIONS

.TP
\fB\-f\fR, \fB\-\-filename\fR
name of file to search
.TP
\fB\-p\fR, \fB\-\-pageid\fR
page_id of page for which to search
.TP
\fB\-s\fR, \fB\-\-stubfile\fR
name of MediaWiki XML stub file to fall back on (see 'Note' above)
.TP
\fB\-a\fR, \fB\-\-useapi\fR
fall back to the api if stuck (see 'Note' above)
.TP
\fB\-V\fR, \fB\-\-verbose\fR
show search process; specify multiple times for more output
.TP
\fB\-h\fR, \fB\-\-help\fR
Show this help message
.TP
\fB\-V\fR, \fB\-\-version\fR
Display the version of this program and exit
.SH AUTHOR
Written by Ariel T. Glenn.
.SH "REPORTING BUGS"
Report bugs in findpageidinbz2xml to <https://phabricator.wikimedia.org/>.
.PP
.br
See also dumpbz2filefromoffset(1), dumplastbz2block(1), findpageidinbz2xml(1),
recompressxml(1), writeuptopageid(1)
.SH COPYRIGHT
Copyright \(co 2011, 2012, 2013 Ariel T. Glenn.  All rights reserved.
.PP
This program is free software: you can redistribute it and/or modify it
under the  terms of the GNU General Public License as published by the
Free Software Foundation, either version 2 of the License, or (at your
option) any later version.
.PP
This  program  is  distributed  in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General
Public License for more details.
.PP
You should have received a copy of the GNU General Public License along
with this program.  If not, see <http://www.gnu.org/licenses/>
